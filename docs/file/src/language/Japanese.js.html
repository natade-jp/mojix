<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/language/Japanese.js | mojix</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Moji / Kanji / Unicode analysis utilities (work in progress)"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="mojix"><meta property="twitter:description" content="Moji / Kanji / Unicode analysis utilities (work in progress)"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/natade-jp/mojix"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/mojix.js~Mojix.html">Mojix</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#encode">encode</a><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-MenKuTen">MenKuTen</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#tools">tools</a><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-MojiData">MojiData</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-MojiEncodeData">MojiEncodeData</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-MojiTypeData">MojiTypeData</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/language/Japanese.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&#xFEFF;/**
 * The script is part of Mojix.
 *
 * AUTHOR:
 *  natade (http://twitter.com/natadea)
 *
 * LICENSE:
 *  The MIT license https://opensource.org/licenses/MIT
 */

import Unicode from &quot;../encode/Unicode.js&quot;;

/**
 * &#x65E5;&#x672C;&#x8A9E;&#x3092;&#x6271;&#x3046;&#x30AF;&#x30E9;&#x30B9;
 * @ignore
 */
export default class Japanese {
	/**
	 * &#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x3092;&#x3072;&#x3089;&#x304C;&#x306A;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toHiragana(text) {
		/**
		 * @param {string} ch
		 */
		const func = function (ch) {
			// prettier-ignore
			return String.fromCharCode(ch.charCodeAt(0) - 0x0060);
		};
		return text.replace(/[\u30A1-\u30F6]/g, func);
	}

	/**
	 * &#x3072;&#x3089;&#x304C;&#x306A;&#x3092;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toKatakana(text) {
		/**
		 * @param {string} ch
		 */
		const func = function (ch) {
			// prettier-ignore
			return String.fromCharCode(ch.charCodeAt(0) + 0x0060);
		};
		return text.replace(/[\u3041-\u3096]/g, func);
	}

	/**
	 * &#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x3092;&#x534A;&#x89D2;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toHalfWidthSpace(text) {
		// prettier-ignore
		return text.replace(/\u3000/g, String.fromCharCode(0x0020));
	}

	/**
	 * &#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x3092;&#x5168;&#x89D2;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toFullWidthSpace(text) {
		// prettier-ignore
		return text.replace(/\u0020/g, String.fromCharCode(0x3000));
	}

	/**
	 * &#x82F1;&#x6570;&#x8A18;&#x53F7;&#x3092;&#x534A;&#x89D2;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toHalfWidthAsciiCode(text) {
		let out = text;
		out = out.replace(/\u3000/g, &quot;\u0020&quot;); //&#x5168;&#x89D2;&#x30B9;&#x30DA;&#x30FC;&#x30B9;
		out = out.replace(/[\u2018-\u201B]/g, &quot;\u0027&quot;); //&#x30B7;&#x30F3;&#x30B0;&#x30EB;&#x30AF;&#x30A9;&#x30FC;&#x30C6;&#x30FC;&#x30B7;&#x30E7;&#x30F3;
		out = out.replace(/[\u201C-\u201F]/g, &quot;\u0022&quot;); //&#x30C0;&#x30D6;&#x30EB;&#x30AF;&#x30A9;&#x30FC;&#x30C6;&#x30FC;&#x30B7;&#x30E7;&#x30F3;
		/**
		 * @param {string} ch
		 */
		const func = function (ch) {
			const code = ch.charCodeAt(0);
			// prettier-ignore
			return String.fromCharCode(code - 0xFEE0);
		};
		return out.replace(/[\uFF01-\uFF5E]/g, func);
	}

	/**
	 * &#x82F1;&#x6570;&#x8A18;&#x53F7;&#x3092;&#x5168;&#x89D2;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toFullWidthAsciiCode(text) {
		let out = text;
		out = out.replace(/\u0020/g, &quot;\u3000&quot;); //&#x5168;&#x89D2;&#x30B9;&#x30DA;&#x30FC;&#x30B9;
		out = out.replace(/\u0022/g, &quot;\u201D&quot;); //&#x30C0;&#x30D6;&#x30EB;&#x30AF;&#x30A9;&#x30FC;&#x30C6;&#x30FC;&#x30B7;&#x30E7;&#x30F3;
		out = out.replace(/\u0027/g, &quot;\u2019&quot;); //&#x30A2;&#x30DD;&#x30B9;&#x30C8;&#x30ED;&#x30D5;&#x30A3;&#x30FC;
		/**
		 * @param {string} ch
		 */
		const func = function (ch) {
			const code = ch.charCodeAt(0);
			// prettier-ignore
			return String.fromCharCode(code + 0xFEE0);
		};
		return out.replace(/[\u0020-\u007E]/g, func);
	}

	/**
	 * &#x30A2;&#x30EB;&#x30D5;&#x30A1;&#x30D9;&#x30C3;&#x30C8;&#x3092;&#x534A;&#x89D2;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toHalfWidthAlphabet(text) {
		/**
		 * @param {string} ch
		 */
		const func = function (ch) {
			// prettier-ignore
			return String.fromCharCode(ch.charCodeAt(0) - 0xFEE0);
		};
		return text.replace(/[\uFF21-\uFF3A\uFF41-\uFF5A]/g, func);
	}

	/**
	 * &#x30A2;&#x30EB;&#x30D5;&#x30A1;&#x30D9;&#x30C3;&#x30C8;&#x3092;&#x5168;&#x89D2;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toFullWidthAlphabet(text) {
		/**
		 * @param {string} ch
		 */
		const func = function (ch) {
			// prettier-ignore
			return String.fromCharCode(ch.charCodeAt(0) + 0xFEE0);
		};
		return text.replace(/[A-Za-z]/g, func);
	}

	/**
	 * &#x6570;&#x5024;&#x3092;&#x534A;&#x89D2;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toHalfWidthNumber(text) {
		/**
		 * @param {string} ch
		 */
		const func = function (ch) {
			// prettier-ignore
			return String.fromCharCode(ch.charCodeAt(0) - 0xFEE0);
		};
		return text.replace(/[\uFF10-\uFF19]/g, func);
	}

	/**
	 * &#x6570;&#x5024;&#x3092;&#x5168;&#x89D2;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toFullWidthNumber(text) {
		/**
		 * @param {string} ch
		 */
		const func = function (ch) {
			// prettier-ignore
			return String.fromCharCode(ch.charCodeAt(0) + 0xFEE0);
		};
		return text.replace(/[0-9]/g, func);
	}

	/**
	 * &#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x3092;&#x534A;&#x89D2;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toHalfWidthKana(text) {
		/**
		 * @type {Object&lt;number, string&gt;}
		 */
		// prettier-ignore
		const map = {
			0x3001:	&quot;\uFF64&quot;,	//	&#xFF64;
			0x3002:	&quot;\uFF61&quot;,	//	&#x3002;	&#xFF61;
			0x300C:	&quot;\uFF62&quot;,	//	&#x300C;	&#xFF62;
			0x300D:	&quot;\uFF63&quot;,	//	&#x300D;	&#xFF63;
			0x309B:	&quot;\uFF9E&quot;,	//	&#x309B;	&#xFF9E;
			0x309C:	&quot;\uFF9F&quot;,	//	&#x309C;	&#xFF9F;
			0x30A1:	&quot;\uFF67&quot;,	//	&#x30A1;	&#xFF67;
			0x30A2:	&quot;\uFF71&quot;,	//	&#x30A2;	&#xFF71;
			0x30A3:	&quot;\uFF68&quot;,	//	&#x30A3;	&#xFF68;
			0x30A4:	&quot;\uFF72&quot;,	//	&#x30A4;	&#xFF72;
			0x30A5:	&quot;\uFF69&quot;,	//	&#x30A5;	&#xFF69;
			0x30A6:	&quot;\uFF73&quot;,	//	&#x30A6;	&#xFF73;
			0x30A7:	&quot;\uFF6A&quot;,	//	&#x30A7;	&#xFF6A;
			0x30A8:	&quot;\uFF74&quot;,	//	&#x30A8;	&#xFF74;
			0x30A9:	&quot;\uFF6B&quot;,	//	&#x30A9;	&#xFF6B;
			0x30AA:	&quot;\uFF75&quot;,	//	&#x30AA;	&#xFF75;
			0x30AB:	&quot;\uFF76&quot;,	//	&#x30AB;	&#xFF76;
			0x30AC:	&quot;\uFF76\uFF9E&quot;,	//	&#x30AC;	&#xFF76;&#xFF9E;
			0x30AD:	&quot;\uFF77&quot;,	//	&#x30AD;	&#xFF77;
			0x30AE:	&quot;\uFF77\uFF9E&quot;,	//	&#x30AE;	&#xFF77;&#xFF9E;
			0x30AF:	&quot;\uFF78&quot;,	//	&#x30AF;	&#xFF78;
			0x30B0:	&quot;\uFF78\uFF9E&quot;,	//	&#x30B0;	&#xFF78;&#xFF9E;
			0x30B1:	&quot;\uFF79&quot;,	//	&#x30B1;	&#xFF79;
			0x30B2:	&quot;\uFF79\uFF9E&quot;,	//	&#x30B2;	&#xFF79;&#xFF9E;
			0x30B3:	&quot;\uFF7A&quot;,	//	&#x30B3;	&#xFF7A;
			0x30B4:	&quot;\uFF7A\uFF9E&quot;,	//	&#x30B4;	&#xFF7A;&#xFF9E;
			0x30B5:	&quot;\uFF7B&quot;,	//	&#x30B5;	&#xFF7B;
			0x30B6:	&quot;\uFF7B\uFF9E&quot;,	//	&#x30B6;	&#xFF7B;&#xFF9E;
			0x30B7:	&quot;\uFF7C&quot;,	//	&#x30B7;	&#xFF7C;
			0x30B8:	&quot;\uFF7C\uFF9E&quot;,	//	&#x30B8;	&#xFF7C;&#xFF9E;
			0x30B9:	&quot;\uFF7D&quot;,	//	&#x30B9;	&#xFF7D;
			0x30BA:	&quot;\uFF7D\uFF9E&quot;,	//	&#x30BA;	&#xFF7D;&#xFF9E;
			0x30BB:	&quot;\uFF7E&quot;,	//	&#x30BB;	&#xFF7E;
			0x30BC:	&quot;\uFF7E\uFF9E&quot;,	//	&#x30BC;	&#xFF7E;&#xFF9E;
			0x30BD:	&quot;\uFF7F&quot;,	//	&#x30BD;	&#xFF7F;
			0x30BE:	&quot;\uFF7F\uFF9E&quot;,	//	&#x30BE;	&#xFF7F;&#xFF9E;
			0x30BF:	&quot;\uFF80&quot;,	//	&#x30BF;	&#xFF80;
			0x30C0:	&quot;\uFF80\uFF9E&quot;,	//	&#x30C0;	&#xFF80;&#xFF9E;
			0x30C1:	&quot;\uFF81&quot;,	//	&#x30C1;	&#xFF81;
			0x30C2:	&quot;\uFF81\uFF9E&quot;,	//	&#x30C2;	&#xFF81;&#xFF9E;
			0x30C3:	&quot;\uFF6F&quot;,	//	&#x30C3;	&#xFF6F;
			0x30C4:	&quot;\uFF82&quot;,	//	&#x30C4;	&#xFF82;
			0x30C5:	&quot;\uFF82\uFF9E&quot;,	//	&#x30C5;	&#xFF82;&#xFF9E;
			0x30C6:	&quot;\uFF83&quot;,	//	&#x30C6;	&#xFF83;
			0x30C7:	&quot;\uFF83\uFF9E&quot;,	//	&#x30C7;	&#xFF83;&#xFF9E;
			0x30C8:	&quot;\uFF84&quot;,	//	&#x30C8;	&#xFF84;
			0x30C9:	&quot;\uFF84\uFF9E&quot;,	//	&#x30C9;	&#xFF84;&#xFF9E;
			0x30CA:	&quot;\uFF85&quot;,	//	&#x30CA;	&#xFF85;
			0x30CB:	&quot;\uFF86&quot;,	//	&#x30CB;	&#xFF86;
			0x30CC:	&quot;\uFF87&quot;,	//	&#x30CC;	&#xFF87;
			0x30CD:	&quot;\uFF88&quot;,	//	&#x30CD;	&#xFF88;
			0x30CE:	&quot;\uFF89&quot;,	//	&#x30CE;	&#xFF89;
			0x30CF:	&quot;\uFF8A&quot;,	//	&#x30CF;	&#xFF8A;
			0x30D0:	&quot;\uFF8A\uFF9E&quot;,	//	&#x30D0;	&#xFF8A;&#xFF9E;
			0x30D1:	&quot;\uFF8A\uFF9F&quot;,	//	&#x30D1;	&#xFF8A;&#xFF9F;
			0x30D2:	&quot;\uFF8B&quot;,	//	&#x30D2;	&#xFF8B;
			0x30D3:	&quot;\uFF8B\uFF9E&quot;,	//	&#x30D3;	&#xFF8B;&#xFF9E;
			0x30D4:	&quot;\uFF8B\uFF9F&quot;,	//	&#x30D4;	&#xFF8B;&#xFF9F;
			0x30D5:	&quot;\uFF8C&quot;,	//	&#x30D5;	&#xFF8C;
			0x30D6:	&quot;\uFF8C\uFF9E&quot;,	//	&#x30D6;	&#xFF8C;&#xFF9E;
			0x30D7:	&quot;\uFF8C\uFF9F&quot;,	//	&#x30D7;	&#xFF8C;&#xFF9F;
			0x30D8:	&quot;\uFF8D&quot;,	//	&#x30D8;	&#xFF8D;
			0x30D9:	&quot;\uFF8D\uFF9E&quot;,	//	&#x30D9;	&#xFF8D;&#xFF9E;
			0x30DA:	&quot;\uFF8D\uFF9F&quot;,	//	&#x30DA;	&#xFF8D;&#xFF9F;
			0x30DB:	&quot;\uFF8E&quot;,	//	&#x30DB;	&#xFF8E;
			0x30DC:	&quot;\uFF8E\uFF9E&quot;,	//	&#x30DC;	&#xFF8E;&#xFF9E;
			0x30DD:	&quot;\uFF8E\uFF9F&quot;,	//	&#x30DD;	&#xFF8E;&#xFF9F;
			0x30DE:	&quot;\uFF8F&quot;,	//	&#x30DE;	&#xFF8F;
			0x30DF:	&quot;\uFF90&quot;,	//	&#x30DF;	&#xFF90;
			0x30E0:	&quot;\uFF91&quot;,	//	&#x30E0;	&#xFF91;
			0x30E1:	&quot;\uFF92&quot;,	//	&#x30E1;	&#xFF92;
			0x30E2:	&quot;\uFF93&quot;,	//	&#x30E2;	&#xFF93;
			0x30E3:	&quot;\uFF6C&quot;,	//	&#x30E3;	&#xFF6C;
			0x30E4:	&quot;\uFF94&quot;,	//	&#x30E4;	&#xFF94;
			0x30E5:	&quot;\uFF6D&quot;,	//	&#x30E5;	&#xFF6D;
			0x30E6:	&quot;\uFF95&quot;,	//	&#x30E6;	&#xFF95;
			0x30E7:	&quot;\uFF6E&quot;,	//	&#x30E7;	&#xFF6E;
			0x30E8:	&quot;\uFF96&quot;,	//	&#x30E8;	&#xFF96;
			0x30E9:	&quot;\uFF97&quot;,	//	&#x30E9;	&#xFF97;
			0x30EA:	&quot;\uFF98&quot;,	//	&#x30EA;	&#xFF98;
			0x30EB:	&quot;\uFF99&quot;,	//	&#x30EB;	&#xFF99;
			0x30EC:	&quot;\uFF9A&quot;,	//	&#x30EC;	&#xFF9A;
			0x30ED:	&quot;\uFF9B&quot;,	//	&#x30ED;	&#xFF9B;
			0x30EE:	&quot;\uFF9C&quot;,	//	&#x30EE;	&#xFF9C;
			0x30EF:	&quot;\uFF9C&quot;,	//	&#x30EF;	&#xFF9C;
			0x30F0:	&quot;\uFF72&quot;,	//	&#x30F0;	&#xFF72;
			0x30F1:	&quot;\uFF74&quot;,	//	&#x30F1;	&#xFF74;
			0x30F2:	&quot;\uFF66&quot;,	//	&#x30F2;	&#xFF66;
			0x30F3:	&quot;\uFF9D&quot;,	//	&#x30F3;	&#xFF9D;
			0x30F4:	&quot;\uFF73\uFF9E&quot;,	//	&#x30F4;	&#xFF73;&#xFF9E;
			0x30F5:	&quot;\uFF76&quot;,	//	&#x30F5;	&#xFF76;
			0x30F6:	&quot;\uFF79&quot;,	//	&#x30F6;	&#xFF79;
			0x30F7:	&quot;\uFF9C\uFF9E&quot;,	//	&#x30F7;	&#xFF9C;&#xFF9E;
			0x30F8:	&quot;\uFF72\uFF9E&quot;,	//	&#x30F8;	&#xFF72;&#xFF9E;
			0x30F9:	&quot;\uFF74\uFF9E&quot;,	//	&#x30F9;	&#xFF74;&#xFF9E;
			0x30FA:	&quot;\uFF66\uFF9E&quot;,	//	&#x30FA;	&#xFF66;&#xFF9E;
			0x30FB:	&quot;\uFF65&quot;,	//	&#x30FB;	&#xFF65;
			0x30FC:	&quot;\uFF70&quot;		//	&#x30FC;	&#xFF70;
		};
		/**
		 * @param {string} ch
		 */
		const func = function (ch) {
			if (ch.length === 1) {
				return map[ch.charCodeAt(0)];
			} else {
				return map[ch.charCodeAt(0)] + map[ch.charCodeAt(1)];
			}
		};
		return text.replace(/[\u3001\u3002\u300C\u300D\u309B\u309C\u30A1-\u30FC][\u309B\u309C]?/g, func);
	}

	/**
	 * &#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x3092;&#x5168;&#x89D2;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toFullWidthKana(text) {
		/**
		 * @type {Record&lt;number, number&gt;}
		 */
		// prettier-ignore
		const map = {
			0xFF61:	0x3002,	//	&#x3002;	&#xFF61;
			0xFF62:	0x300C,	//	&#x300C;	&#xFF62;
			0xFF63:	0x300D,	//	&#x300D;	&#xFF63;
			0xFF64:	0x3001,	//	&#xFF64;
			0xFF65:	0x30FB,	//	&#x30FB;	&#xFF65;
			0xFF66:	0x30F2,	//	&#x30F2;	&#xFF66;
			0xFF67:	0x30A1,	//	&#x30A1;	&#xFF67;
			0xFF68:	0x30A3,	//	&#x30A3;	&#xFF68;
			0xFF69:	0x30A5,	//	&#x30A5;	&#xFF69;
			0xFF6A:	0x30A7,	//	&#x30A7;	&#xFF6A;
			0xFF6B:	0x30A9,	//	&#x30A9;	&#xFF6B;
			0xFF6C:	0x30E3,	//	&#x30E3;	&#xFF6C;
			0xFF6D:	0x30E5,	//	&#x30E5;	&#xFF6D;
			0xFF6E:	0x30E7,	//	&#x30E7;	&#xFF6E;
			0xFF6F:	0x30C3,	//	&#x30C3;	&#xFF6F;
			0xFF70:	0x30FC,	//	&#x30FC;	&#xFF70;
			0xFF71:	0x30A2,	//	&#x30A2;	&#xFF71;
			0xFF72:	0x30A4,	//	&#x30A4;	&#xFF72;
			0xFF73:	0x30A6,	//	&#x30A6;	&#xFF73;
			0xFF74:	0x30A8,	//	&#x30A8;	&#xFF74;
			0xFF75:	0x30AA,	//	&#x30AA;	&#xFF75;
			0xFF76:	0x30AB,	//	&#x30AB;	&#xFF76;
			0xFF77:	0x30AD,	//	&#x30AD;	&#xFF77;
			0xFF78:	0x30AF,	//	&#x30AF;	&#xFF78;
			0xFF79:	0x30B1,	//	&#x30B1;	&#xFF79;
			0xFF7A:	0x30B3,	//	&#x30B3;	&#xFF7A;
			0xFF7B:	0x30B5,	//	&#x30B5;	&#xFF7B;
			0xFF7C:	0x30B7,	//	&#x30B7;	&#xFF7C;
			0xFF7D:	0x30B9,	//	&#x30B9;	&#xFF7D;
			0xFF7E:	0x30BB,	//	&#x30BB;	&#xFF7E;
			0xFF7F:	0x30BD,	//	&#x30BD;	&#xFF7F;
			0xFF80:	0x30BF,	//	&#x30BF;	&#xFF80;
			0xFF81:	0x30C1,	//	&#x30C1;	&#xFF81;
			0xFF82:	0x30C4,	//	&#x30C4;	&#xFF82;
			0xFF83:	0x30C6,	//	&#x30C6;	&#xFF83;
			0xFF84:	0x30C8,	//	&#x30C8;	&#xFF84;
			0xFF85:	0x30CA,	//	&#x30CA;	&#xFF85;
			0xFF86:	0x30CB,	//	&#x30CB;	&#xFF86;
			0xFF87:	0x30CC,	//	&#x30CC;	&#xFF87;
			0xFF88:	0x30CD,	//	&#x30CD;	&#xFF88;
			0xFF89:	0x30CE,	//	&#x30CE;	&#xFF89;
			0xFF8A:	0x30CF,	//	&#x30CF;	&#xFF8A;
			0xFF8B:	0x30D2,	//	&#x30D2;	&#xFF8B;
			0xFF8C:	0x30D5,	//	&#x30D5;	&#xFF8C;
			0xFF8D:	0x30D8,	//	&#x30D8;	&#xFF8D;
			0xFF8E:	0x30DB,	//	&#x30DB;	&#xFF8E;
			0xFF8F:	0x30DE,	//	&#x30DE;	&#xFF8F;
			0xFF90:	0x30DF,	//	&#x30DF;	&#xFF90;
			0xFF91:	0x30E0,	//	&#x30E0;	&#xFF91;
			0xFF92:	0x30E1,	//	&#x30E1;	&#xFF92;
			0xFF93:	0x30E2,	//	&#x30E2;	&#xFF93;
			0xFF94:	0x30E4,	//	&#x30E4;	&#xFF94;
			0xFF95:	0x30E6,	//	&#x30E6;	&#xFF95;
			0xFF96:	0x30E8,	//	&#x30E8;	&#xFF96;
			0xFF97:	0x30E9,	//	&#x30E9;	&#xFF97;
			0xFF98:	0x30EA,	//	&#x30EA;	&#xFF98;
			0xFF99:	0x30EB,	//	&#x30EB;	&#xFF99;
			0xFF9A:	0x30EC,	//	&#x30EC;	&#xFF9A;
			0xFF9B:	0x30ED,	//	&#x30ED;	&#xFF9B;
			0xFF9C:	0x30EF,	//	&#x30EF;	&#xFF9C;
			0xFF9D:	0x30F3,	//	&#x30F3;	&#xFF9D;
			0xFF9E:	0x309B,	//	&#x309B;	&#xFF9E;
			0xFF9F:	0x309C		//	&#x309C;	&#xFF9F;
		};
		/**
		 * @param {string} str
		 */
		const func = function (str) {
			if (str.length === 1) {
				return String.fromCharCode(map[str.charCodeAt(0)]);
			} else {
				const next = str.charCodeAt(1);
				const ch = str.charCodeAt(0);
				if (next === 0xFF9E) {
					// Shift-JIS&#x306B;&#x306A;&#x3044;&#x6FC1;&#x70B9;&#xFF08;&#x30F7;&#x3001;&#x30F8;&#x3001;&#x30F9;&#x3001;&#x30FA;&#xFF09;&#x306F;&#x610F;&#x56F3;&#x7684;&#x306B;&#x7121;&#x8996;
					if (ch === 0xFF73) {
						// &#x30F4;
						return String.fromCharCode(0x3094);
					} else if ((0xFF76 &lt;= ch &amp;&amp; ch &lt;= 0xFF84) || (0xFF8A &lt;= ch &amp;&amp; ch &lt;= 0xFF8E)) {
						// &#x30AC;-&#x30C9;&#x3001;&#x30D0;-&#x30DC;
						return String.fromCharCode(map[ch] + 1);
					}
				} else if (next === 0xFF9F) {
					// &#x534A;&#x6FC1;&#x70B9;
					if (0xFF8A &lt;= ch &amp;&amp; ch &lt;= 0xFF8E) {
					// &#x30D1;-&#x30DD;
						return String.fromCharCode(map[ch] + 2);
					}
				}
				return String.fromCharCode(map[ch]) + String.fromCharCode(map[next]);
			}
		};
		return text.replace(/[\uFF61-\uFF9F][\uFF9E\uFF9F]?/g, func);
	}

	/**
	 * &#x534A;&#x89D2;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toHalfWidth(text) {
		return Japanese.toHalfWidthKana(Japanese.toHalfWidthAsciiCode(text));
	}

	/**
	 * &#x5168;&#x89D2;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toFullWidth(text) {
		return Japanese.toFullWidthKana(Japanese.toFullWidthAsciiCode(text));
	}

	/**
	 * &#x30ED;&#x30FC;&#x30DE;&#x5B57;&#x304B;&#x3089;&#x3072;&#x3089;&#x304C;&#x306A;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toHiraganaFromRomaji(text) {
		/**
		 * &#x30ED;&#x30FC;&#x30DE;&#x5B57;&#x304B;&#x3089;&#x5909;&#x63DB;&#x30DE;&#x30C3;&#x30D7;
		 * .y[aiuoe] &#x306F;&#x9664;&#x3044;&#x3066;&#x3044;&#x308B;
		 * @type {Object&lt;string, string&gt;}
		 */
		// prettier-ignore
		const map = {
			a: &quot;&#x3042;&quot;,
			i: &quot;&#x3044;&quot;,
			u: &quot;&#x3046;&quot;,
			e: &quot;&#x3048;&quot;,
			o: &quot;&#x304A;&quot;,
			ka: &quot;&#x304B;&quot;,
			ki: &quot;&#x304D;&quot;,
			ku: &quot;&#x304F;&quot;,
			ke: &quot;&#x3051;&quot;,
			ko: &quot;&#x3053;&quot;,
			ga: &quot;&#x304C;&quot;,
			gi: &quot;&#x304E;&quot;,
			gu: &quot;&#x3050;&quot;,
			ge: &quot;&#x3052;&quot;,
			go: &quot;&#x3054;&quot;,
			sa: &quot;&#x3055;&quot;,
			si: &quot;&#x3057;&quot;,
			su: &quot;&#x3059;&quot;,
			se: &quot;&#x305B;&quot;,
			so: &quot;&#x305D;&quot;,
			za: &quot;&#x3056;&quot;,
			zi: &quot;&#x3058;&quot;,
			zu: &quot;&#x305A;&quot;,
			ze: &quot;&#x305C;&quot;,
			zo: &quot;&#x305E;&quot;,
			ta: &quot;&#x305F;&quot;,
			ti: &quot;&#x3061;&quot;,
			tu: &quot;&#x3064;&quot;,
			te: &quot;&#x3066;&quot;,
			to: &quot;&#x3068;&quot;,
			da: &quot;&#x3060;&quot;,
			di: &quot;&#x3062;&quot;,
			du: &quot;&#x3065;&quot;,
			de: &quot;&#x3067;&quot;,
			do: &quot;&#x3069;&quot;,
			na: &quot;&#x306A;&quot;,
			ni: &quot;&#x306B;&quot;,
			nu: &quot;&#x306C;&quot;,
			ne: &quot;&#x306D;&quot;,
			no: &quot;&#x306E;&quot;,
			ha: &quot;&#x306F;&quot;,
			hi: &quot;&#x3072;&quot;,
			hu: &quot;&#x3075;&quot;,
			he: &quot;&#x3078;&quot;,
			ho: &quot;&#x307B;&quot;,
			ba: &quot;&#x3070;&quot;,
			bi: &quot;&#x3073;&quot;,
			bu: &quot;&#x3076;&quot;,
			be: &quot;&#x3079;&quot;,
			bo: &quot;&#x307C;&quot;,
			pa: &quot;&#x3071;&quot;,
			pi: &quot;&#x3074;&quot;,
			pu: &quot;&#x3077;&quot;,
			pe: &quot;&#x307A;&quot;,
			po: &quot;&#x307D;&quot;,
			ma: &quot;&#x307E;&quot;,
			mi: &quot;&#x307F;&quot;,
			mu: &quot;&#x3080;&quot;,
			me: &quot;&#x3081;&quot;,
			mo: &quot;&#x3082;&quot;,
			ya: &quot;&#x3084;&quot;,
			yi: &quot;&#x3044;&quot;,
			yu: &quot;&#x3086;&quot;,
			ye: &quot;&#x3044;&#x3047;&quot;,
			yo: &quot;&#x3088;&quot;,
			ra: &quot;&#x3089;&quot;,
			ri: &quot;&#x308A;&quot;,
			ru: &quot;&#x308B;&quot;,
			re: &quot;&#x308C;&quot;,
			ro: &quot;&#x308D;&quot;,
			wa: &quot;&#x308F;&quot;,
			wi: &quot;&#x3046;&#x3043;&quot;,
			wu: &quot;&#x3046;&quot;,
			we: &quot;&#x3046;&#x3047;&quot;,
			wo: &quot;&#x3092;&quot;,
			la: &quot;&#x3041;&quot;,
			li: &quot;&#x3043;&quot;,
			lu: &quot;&#x3045;&quot;,
			le: &quot;&#x3047;&quot;,
			lo: &quot;&#x3049;&quot;,
			lya: &quot;&#x3083;&quot;,
			lyi: &quot;&#x3043;&quot;,
			lyu: &quot;&#x3085;&quot;,
			lye: &quot;&#x3047;&quot;,
			lyo: &quot;&#x3087;&quot;,
			ltu: &quot;&#x3063;&quot;,
			ltsu: &quot;&#x3063;&quot;,
			xa: &quot;&#x3041;&quot;,
			xi: &quot;&#x3043;&quot;,
			xu: &quot;&#x3045;&quot;,
			xe: &quot;&#x3047;&quot;,
			xo: &quot;&#x3049;&quot;,
			xya: &quot;&#x3083;&quot;,
			xyi: &quot;&#x3043;&quot;,
			xyu: &quot;&#x3085;&quot;,
			xye: &quot;&#x3047;&quot;,
			xyo: &quot;&#x3087;&quot;,
			xtu: &quot;&#x3063;&quot;,
			xtsu: &quot;&#x3063;&quot;,
			// &#x74B0;&#x5883;&#x4F9D;&#x5B58;&#x3092;&#x306A;&#x304F;&#x3059;&#x305F;&#x3081;&#x306B;&#x3001;SJIS&#x306B;&#x3042;&#x308B;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x306B;&#x3057;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;
			va: &quot;&#x30F4;&#x3041;&quot;,
			vi: &quot;&#x30F4;&#x3043;&quot;,
			vu: &quot;&#x30F4;&quot;,
			ve: &quot;&#x30F4;&#x3047;&quot;,
			vo: &quot;&#x30F4;&#x3049;&quot;,
			qa: &quot;&#x304F;&#x3041;&quot;,
			qi: &quot;&#x304F;&#x3043;&quot;,
			qu: &quot;&#x304F;&quot;,
			qe: &quot;&#x304F;&#x3047;&quot;,
			qo: &quot;&#x304F;&#x3049;&quot;,
			qwa: &quot;&#x304F;&#x3041;&quot;,
			qwi: &quot;&#x304F;&#x3043;&quot;,
			qwu: &quot;&#x304F;&#x3045;&quot;,
			qwe: &quot;&#x304F;&#x3047;&quot;,
			qwo: &quot;&#x304F;&#x3049;&quot;,
			gwa: &quot;&#x3050;&#x3041;&quot;,
			gwi: &quot;&#x3050;&#x3043;&quot;,
			gwu: &quot;&#x3050;&#x3045;&quot;,
			gwe: &quot;&#x3050;&#x3047;&quot;,
			gwo: &quot;&#x3050;&#x3049;&quot;,
			sha: &quot;&#x3057;&#x3083;&quot;,
			shi: &quot;&#x3057;&quot;,
			shu: &quot;&#x3057;&#x3085;&quot;,
			she: &quot;&#x3057;&#x3047;&quot;,
			sho: &quot;&#x3057;&#x3087;&quot;,
			swa: &quot;&#x3059;&#x3041;&quot;,
			swi: &quot;&#x3059;&#x3043;&quot;,
			swu: &quot;&#x3059;&#x3045;&quot;,
			swe: &quot;&#x3059;&#x3047;&quot;,
			swo: &quot;&#x3059;&#x3049;&quot;,
			cha: &quot;&#x3061;&#x3083;&quot;,
			chi: &quot;&#x3061;&quot;,
			chu: &quot;&#x3061;&#x3085;&quot;,
			che: &quot;&#x3061;&#x3047;&quot;,
			cho: &quot;&#x3061;&#x3087;&quot;,
			tha: &quot;&#x3061;&#x3083;&quot;,
			thi: &quot;&#x3061;&quot;,
			thu: &quot;&#x3066;&#x3085;&quot;,
			the: &quot;&#x3066;&#x3047;&quot;,
			tho: &quot;&#x3066;&#x3087;&quot;,
			tsa: &quot;&#x3064;&#x3041;&quot;,
			tsi: &quot;&#x3064;&#x3043;&quot;,
			tsu: &quot;&#x3064;&quot;,
			tse: &quot;&#x3064;&#x3047;&quot;,
			tso: &quot;&#x3064;&#x3049;&quot;,
			twa: &quot;&#x3068;&#x3041;&quot;,
			twi: &quot;&#x3068;&#x3043;&quot;,
			twu: &quot;&#x3068;&#x3045;&quot;,
			twe: &quot;&#x3068;&#x3047;&quot;,
			two: &quot;&#x3068;&#x3049;&quot;,
			fa: &quot;&#x3075;&#x3041;&quot;,
			fi: &quot;&#x3075;&#x3043;&quot;,
			fu: &quot;&#x3075;&quot;,
			fe: &quot;&#x3075;&#x3047;&quot;,
			fo: &quot;&#x3075;&#x3049;&quot;,
			fwa: &quot;&#x3075;&#x3041;&quot;,
			fwi: &quot;&#x3075;&#x3043;&quot;,
			fwu: &quot;&#x3075;&#x3045;&quot;,
			fwe: &quot;&#x3075;&#x3047;&quot;,
			fwo: &quot;&#x3075;&#x3049;&quot;,
			ja: &quot;&#x3058;&#x3083;&quot;,
			ji: &quot;&#x3058;&quot;,
			ju: &quot;&#x3058;&#x3085;&quot;,
			je: &quot;&#x3058;&#x3047;&quot;,
			jo: &quot;&#x3058;&#x3087;&quot;,
			n: &quot;&#x3093;&quot;,
			nn: &quot;&#x3093;&quot;,
			&quot;-&quot;: &quot;&#x30FC;&quot;,
			&quot;?&quot;: &quot;&#xFF1F;&quot;,
			&quot;!&quot;: &quot;&#xFF01;&quot;,
			&quot;,&quot;: &quot;&#x3001;&quot;,
			&quot;.&quot;: &quot;&#x3002;&quot;
		};
		/**
		 * ya, yi, yu, ye, yo
		 * @type {Object&lt;string, string&gt;}
		 */
		// prettier-ignore
		const y_komoji_map = {
			a: &quot;&#x3083;&quot;,
			i: &quot;&#x3043;&quot;,
			u: &quot;&#x3085;&quot;,
			e: &quot;&#x3047;&quot;,
			o: &quot;&#x3087;&quot;
		};
		/**
		 * @param {string} str
		 */
		const func = function (str) {
			const output = [];
			let y_komoji = null;
			let romaji = str.toLowerCase();
			if (romaji.length &gt; 2) {
				// &#x540C;&#x3058;&#x6587;&#x5B57;&#x306E;&#x7E70;&#x308A;&#x8FD4;&#x3057;&#x306A;&#x3089;&#x300C;&#x3063;&#x300D;&#x306B;&#x5909;&#x66F4;
				if (romaji.charCodeAt(0) === romaji.charCodeAt(1)) {
					// &#x305F;&#x3060;&#x3057;&#x7E70;&#x308A;&#x8FD4;&#x3057;&#x6587;&#x5B57;&#x304C;n&#x306E;&#x5834;&#x5408;&#x306F;&#x300C;&#x3093;&#x300D;&#x3068;&#x3057;&#x3066;&#x6271;&#x3046;
					if (romaji.slice(0, 1) === &quot;n&quot;) {
						output.push(&quot;&#x3093;&quot;);
						romaji = romaji.slice(2);
					} else {
						output.push(&quot;&#x3063;&quot;);
						romaji = romaji.slice(1);
					}
				}
			}
			if (romaji.length === 3) {
				const char_1 = romaji.slice(0, 1);
				const char_2 = romaji.slice(1, 2);
				// 2&#x6587;&#x5B57;&#x76EE;&#x304C;y&#x3067;&#x59CB;&#x307E;&#x308B;&#x5834;&#x5408;&#xFF08;&#x305F;&#x3060;&#x3057;&#x3001;lya, xya &#x306A;&#x3069;&#x3092;&#x9664;&#x304F;&#xFF09;&#x306F;
				// &#x5C0F;&#x6587;&#x5B57;&#x30EA;&#x30B9;&#x30C8;&#x304B;&#x3089;&#x9078;&#x3093;&#x3067;&#x3001;&#x6700;&#x5F8C;&#x306B;&#x5C0F;&#x6587;&#x5B57;&#x3092;&#x3064;&#x3051;&#x308B;
				// sya -&gt; si &#x306B;&#x3064;&#x3051;&#x304B;&#x3048;&#x3066;&#x8F9E;&#x66F8;&#x304B;&#x3089;&#x63A2;&#x3059;
				if (char_2 === &quot;y&quot; &amp;&amp; char_1 !== &quot;l&quot; &amp;&amp; char_1 !== &quot;x&quot;) {
					y_komoji = y_komoji_map[romaji.slice(2)];
					romaji = romaji.slice(0, 1) + &quot;i&quot;;
				}
			}
			const data = map[romaji];
			if (!data) {
				return str;
			}
			output.push(data);
			if (y_komoji) {
				output.push(y_komoji);
			}
			return output.join(&quot;&quot;);
		};
		/* eslint-disable max-len */
		// &#x4E0A;&#x304B;&#x3089;&#x4E0B;&#x3078;&#x306E;&#x512A;&#x5148;&#x5EA6;&#x3067;&#x5909;&#x63DB;&#x3059;&#x308B;&#x3002;
		// ([xl]?[kgsztdnhbpmyrwlxvqfj])(\1)?y?[aiuoe] ... y&#x304C;&#x5165;&#x308A;&#x8FBC;&#x3080;&#x53EF;&#x80FD;&#x6027;&#x304C;&#x3042;&#x308B;&#x6587;&#x5B57;&#x3002;&#x524D;&#x306E;&#x6587;&#x5B57;&#x3092;&#x7E70;&#x308A;&#x8FD4;&#x3057;&#x3066;&#x300C;tta -&gt; &#x3063;&#x305F;&#x300D;&#x306B;&#x3082;&#x5BFE;&#x5FDC;&#x3002;
		// [xl]?(gw|ch|cch|sh|ssh|ts|tts|th|tth)?[aiuoe] ... y&#x3092;&#x4F7F;&#x7528;&#x3057;&#x306A;&#x3044;&#x6587;&#x5B57;
		// nn? ... &#x3093;
		// [?!-] ... &#x8A18;&#x53F7;
		// prettier-ignore
		return (text.replace(/([xl]?[kgsztdnhbpmyrwlxvqfj])(\1)?y?[aiuoe]|[xl]?([gqstf]w|ch|cch|sh|ssh|ts|tts|th|tth)?[aiuoe]|nn?|[?!-.,]/gi, func));
		/* eslint-enable max-len */
	}

	/**
	 * &#x30ED;&#x30FC;&#x30DE;&#x5B57;&#x304B;&#x3089;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toKatakanaFromRomaji(text) {
		return Japanese.toKatakana(Japanese.toHiraganaFromRomaji(text));
	}

	/**
	 * &#x3072;&#x3089;&#x304C;&#x306A;&#x304B;&#x3089;&#x30ED;&#x30FC;&#x30DE;&#x5B57;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toRomajiFromHiragana(text) {
		/**
		 * &#x3072;&#x3089;&#x304C;&#x306A;&#x304B;&#x3089;&#x30ED;&#x30FC;&#x30DE;&#x5B57;&#x3078;&#x306E;&#x5909;&#x63DB;&#x30DE;&#x30C3;&#x30D7;
		 * @type {Object&lt;string, string&gt;}
		 */
		// prettier-ignore
		const map = {
			&#x3042;: &quot;a&quot;,
			&#x3044;: &quot;i&quot;,
			&#x3046;: &quot;u&quot;,
			&#x3048;: &quot;e&quot;,
			&#x304A;: &quot;o&quot;,
			&#x304B;: &quot;ka&quot;,
			&#x304D;: &quot;ki&quot;,
			&#x304F;: &quot;ku&quot;,
			&#x3051;: &quot;ke&quot;,
			&#x3053;: &quot;ko&quot;,
			&#x304C;: &quot;ga&quot;,
			&#x304E;: &quot;gi&quot;,
			&#x3050;: &quot;gu&quot;,
			&#x3052;: &quot;ge&quot;,
			&#x3054;: &quot;go&quot;,
			&#x3055;: &quot;sa&quot;,
			&#x3057;: &quot;shi&quot;,
			&#x3059;: &quot;su&quot;,
			&#x305B;: &quot;se&quot;,
			&#x305D;: &quot;so&quot;,
			&#x3056;: &quot;za&quot;,
			&#x3058;: &quot;ji&quot;,
			&#x305A;: &quot;zu&quot;,
			&#x305C;: &quot;ze&quot;,
			&#x305E;: &quot;zo&quot;,
			&#x305F;: &quot;ta&quot;,
			&#x3061;: &quot;chi&quot;,
			&#x3064;: &quot;tsu&quot;,
			&#x3066;: &quot;te&quot;,
			&#x3068;: &quot;to&quot;,
			&#x3060;: &quot;da&quot;,
			&#x3062;: &quot;di&quot;,
			&#x3065;: &quot;du&quot;,
			&#x3067;: &quot;de&quot;,
			&#x3069;: &quot;do&quot;,
			&#x306A;: &quot;na&quot;,
			&#x306B;: &quot;ni&quot;,
			&#x306C;: &quot;nu&quot;,
			&#x306D;: &quot;ne&quot;,
			&#x306E;: &quot;no&quot;,
			&#x306F;: &quot;ha&quot;,
			&#x3072;: &quot;hi&quot;,
			&#x3075;: &quot;fu&quot;,
			&#x3078;: &quot;he&quot;,
			&#x307B;: &quot;ho&quot;,
			&#x3070;: &quot;ba&quot;,
			&#x3073;: &quot;bi&quot;,
			&#x3076;: &quot;bu&quot;,
			&#x3079;: &quot;be&quot;,
			&#x307C;: &quot;bo&quot;,
			&#x3071;: &quot;pa&quot;,
			&#x3074;: &quot;pi&quot;,
			&#x3077;: &quot;pu&quot;,
			&#x307A;: &quot;pe&quot;,
			&#x307D;: &quot;po&quot;,
			&#x307E;: &quot;ma&quot;,
			&#x307F;: &quot;mi&quot;,
			&#x3080;: &quot;mu&quot;,
			&#x3081;: &quot;me&quot;,
			&#x3082;: &quot;mo&quot;,
			&#x3084;: &quot;ya&quot;,
			&#x3086;: &quot;yu&quot;,
			&#x3044;&#x3047;: &quot;ye&quot;,
			&#x3088;: &quot;yo&quot;,
			&#x3089;: &quot;ra&quot;,
			&#x308A;: &quot;ri&quot;,
			&#x308B;: &quot;ru&quot;,
			&#x308C;: &quot;re&quot;,
			&#x308D;: &quot;ro&quot;,
			&#x308F;: &quot;wa&quot;,
			&#x3046;&#x3043;: &quot;wi&quot;,
			&#x3046;&#x3047;: &quot;we&quot;,
			&#x3046;&#x3049;: &quot;wo&quot;,
			&#x3092;: &quot;wo&quot;,
			&#x3090;: &quot;wi&quot;,
			&#x3091;: &quot;we&quot;,
			&#x3093;: &quot;n&quot;,
			&#x3041;: &quot;lya&quot;,
			&#x3043;: &quot;lyi&quot;,
			&#x3045;: &quot;lyu&quot;,
			&#x3047;: &quot;lye&quot;,
			&#x3049;: &quot;lyo&quot;,
			&#x3083;: &quot;lya&quot;,
			&#x3085;: &quot;lyu&quot;,
			&#x3087;: &quot;lyo&quot;,
			// &#x74B0;&#x5883;&#x4F9D;&#x5B58;&#x3092;&#x306A;&#x304F;&#x3059;&#x305F;&#x3081;&#x306B;&#x3001;SJIS&#x306B;&#x3042;&#x308B;&#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x306B;&#x3057;&#x3066;&#x3044;&#x307E;&#x3059;&#x3002;
			&#x30F4;&#x3041;: &quot;va&quot;,
			&#x30F4;&#x3043;: &quot;vi&quot;,
			&#x30F4;: &quot;vu&quot;,
			&#x30F4;&#x3047;: &quot;ve&quot;,
			&#x30F4;&#x3049;: &quot;vo&quot;,
			&#x3094;&#x3041;: &quot;va&quot;,
			&#x3094;&#x3043;: &quot;vi&quot;,
			&#x3094;: &quot;vu&quot;,
			&#x3094;&#x3047;: &quot;ve&quot;,
			&#x3094;&#x3049;: &quot;vo&quot;,
			&#x304D;&#x3083;: &quot;kya&quot;,
			&#x304D;&#x3043;: &quot;kyi&quot;,
			&#x304D;&#x3085;: &quot;kyu&quot;,
			&#x304D;&#x3047;: &quot;kye&quot;,
			&#x304D;&#x3087;: &quot;kyo&quot;,
			&#x304E;&#x3083;: &quot;gya&quot;,
			&#x304E;&#x3043;: &quot;gyi&quot;,
			&#x304E;&#x3085;: &quot;gyu&quot;,
			&#x304E;&#x3047;: &quot;gye&quot;,
			&#x304E;&#x3087;: &quot;gyo&quot;,
			&#x304F;&#x3041;: &quot;qa&quot;,
			&#x304F;&#x3043;: &quot;qi&quot;,
			&#x304F;&#x3045;: &quot;qu&quot;,
			&#x304F;&#x3047;: &quot;qe&quot;,
			&#x304F;&#x3049;: &quot;qo&quot;,
			&#x3050;&#x3041;: &quot;gwa&quot;,
			&#x3050;&#x3043;: &quot;gwi&quot;,
			&#x3050;&#x3045;: &quot;gwu&quot;,
			&#x3050;&#x3047;: &quot;gwe&quot;,
			&#x3050;&#x3049;: &quot;gwo&quot;,
			&#x3057;&#x3083;: &quot;sha&quot;,
			// &quot;&#x3057;&#x3043;&quot; : &quot;shii&quot; ,
			&#x3057;&#x3085;: &quot;shu&quot;,
			&#x3057;&#x3047;: &quot;she&quot;,
			&#x3057;&#x3087;: &quot;sho&quot;,
			&#x3058;&#x3083;: &quot;ja&quot;,
			// &quot;&#x3058;&#x3043;&quot; : &quot;jii&quot; ,
			&#x3058;&#x3085;: &quot;ju&quot;,
			&#x3058;&#x3047;: &quot;je&quot;,
			&#x3058;&#x3087;: &quot;jo&quot;,
			&#x3061;&#x3083;: &quot;cha&quot;,
			// &quot;&#x3061;&#x3043;&quot; : &quot;chii&quot;
			&#x3061;&#x3085;: &quot;chu&quot;,
			&#x3061;&#x3047;: &quot;che&quot;,
			&#x3061;&#x3087;: &quot;cho&quot;,
			&#x3064;&#x3041;: &quot;tsa&quot;,
			&#x3064;&#x3043;: &quot;tsi&quot;,
			&#x3064;&#x3047;: &quot;tse&quot;,
			&#x3064;&#x3049;: &quot;tso&quot;,
			&#x3066;&#x3041;: &quot;tha&quot;,
			&#x3066;&#x3043;: &quot;thi&quot;,
			&#x3066;&#x3085;: &quot;thu&quot;,
			&#x3066;&#x3047;: &quot;the&quot;,
			&#x3066;&#x3087;: &quot;tho&quot;,
			&#x306B;&#x3083;: &quot;nya&quot;,
			&#x306B;&#x3043;: &quot;nyi&quot;,
			&#x306B;&#x3085;: &quot;nyu&quot;,
			&#x306B;&#x3047;: &quot;nye&quot;,
			&#x306B;&#x3087;: &quot;nyo&quot;,
			&#x3072;&#x3083;: &quot;hya&quot;,
			&#x3072;&#x3043;: &quot;hyi&quot;,
			&#x3072;&#x3085;: &quot;hyu&quot;,
			&#x3072;&#x3047;: &quot;hye&quot;,
			&#x3072;&#x3087;: &quot;hyo&quot;,
			&#x3073;&#x3083;: &quot;bya&quot;,
			&#x3073;&#x3043;: &quot;byi&quot;,
			&#x3073;&#x3085;: &quot;byu&quot;,
			&#x3073;&#x3047;: &quot;bye&quot;,
			&#x3073;&#x3087;: &quot;byo&quot;,
			&#x3074;&#x3083;: &quot;pya&quot;,
			&#x3074;&#x3043;: &quot;pyi&quot;,
			&#x3074;&#x3085;: &quot;pyu&quot;,
			&#x3074;&#x3047;: &quot;pye&quot;,
			&#x3074;&#x3087;: &quot;pyo&quot;,
			&#x3075;&#x3041;: &quot;fa&quot;,
			&#x3075;&#x3043;: &quot;fi&quot;,
			&#x3075;&#x3047;: &quot;fe&quot;,
			&#x3075;&#x3049;: &quot;fo&quot;,
			&#x307F;&#x3083;: &quot;mya&quot;,
			&#x307F;&#x3043;: &quot;myi&quot;,
			&#x307F;&#x3085;: &quot;myu&quot;,
			&#x307F;&#x3047;: &quot;mye&quot;,
			&#x307F;&#x3087;: &quot;myo&quot;,
			&#x308A;&#x3083;: &quot;rya&quot;,
			&#x308A;&#x3043;: &quot;ryi&quot;,
			&#x308A;&#x3085;: &quot;ryu&quot;,
			&#x308A;&#x3047;: &quot;rye&quot;,
			&#x308A;&#x3087;: &quot;ryo&quot;,
			&#x30FC;: &quot;-&quot;,
			&quot;&#xFF1F;&quot;: &quot;?&quot;,
			&quot;&#xFF01;&quot;: &quot;!&quot;,
			&quot;&#x3001;&quot;: &quot;,&quot;,
			&quot;&#x3002;&quot;: &quot;.&quot;
		};

		/**
		 * @type {Object&lt;string, string&gt;}
		 */
		// prettier-ignore
		const komoji_map = {
			&#x3041;: &quot;la&quot;,
			&#x3043;: &quot;li&quot;,
			&#x3045;: &quot;lu&quot;,
			&#x3047;: &quot;le&quot;,
			&#x3049;: &quot;lo&quot;,
			&#x3083;: &quot;lya&quot;,
			&#x3085;: &quot;lyu&quot;,
			&#x3087;: &quot;lyo&quot;
		};

		/**
		 * @param {string} str
		 */
		const func = function (str) {
			let tgt = str;
			let is_xtu = false;
			// 1&#x6587;&#x5B57;&#x76EE;&#x306B;&#x300C;&#x3063;&#x300D;&#x304C;&#x3042;&#x308B;&#x304B;
			if (/^&#x3063;/.test(tgt)) {
				is_xtu = true;
				tgt = tgt.replace(/^&#x3063;*/, &quot;&quot;);
			}
			// &#x5909;&#x63DB;
			let trans = map[tgt];
			// &#x5909;&#x63DB;&#x306B;&#x5931;&#x6557;&#x3057;&#x305F;&#x5834;&#x5408;&#x306F;
			if (!trans) {
				if (trans.length === 1) {
					// 1&#x6587;&#x5B57;&#x306A;&#x306E;&#x3067;&#x3053;&#x308C;&#x4EE5;&#x4E0A;&#x5909;&#x63DB;&#x4E0D;&#x80FD;
					return str;
				}
				const char_1 = trans.slice(0, 1);
				const char_2 = trans.slice(1, 2);
				// &#x6700;&#x5F8C;&#x306E;&#x6587;&#x5B57;&#x304C;&#x5C0F;&#x6587;&#x5B57;&#x3067;&#x3042;&#x308B;
				if (!komoji_map[char_2]) {
					// &#x3053;&#x308C;&#x4EE5;&#x4E0A;&#x5909;&#x63DB;&#x4E0D;&#x80FD;
					return str;
				}
				tgt = char_1;
				const last_text = komoji_map[char_2];
				// &#x518D;&#x5EA6;&#x5909;&#x63DB;&#x30C6;&#x30B9;&#x30C8;
				trans = map[tgt];
				if (!trans) {
					// &#x3053;&#x308C;&#x4EE5;&#x4E0A;&#x5909;&#x63DB;&#x4E0D;&#x80FD;
					return str;
				}
				trans += last_text;
			}
			if (is_xtu) {
				trans = trans.slice(0, 1) + trans;
			}
			return trans;
		};
		// [&#x3063;]*[&#x3042;&#x3044;&#x3046;&#x3048;&#x304A;&#x304B;-&#x3062;&#x3064;-&#x3082;&#x3084;&#x3086;&#x3088;&#x3089;-&#x308D;&#x308F;&#x3090;&#x3091;&#x3092;&#x3093;&#x30F4;][&#x3041;&#x3043;&#x3045;&#x3047;&#x3049;&#x3083;&#x3085;&#x3087;]? ... &#x4FC3;&#x97F3;&#xFF0B;&#x5B50;&#x97F3;&#x6BCD;&#x97F3;
		// [&#x3041;&#x3043;&#x3045;&#x3047;&#x3049;&#x3083;&#x3085;&#x3087;&#x308E;&#x3063;] ... &#x5C0F;&#x6587;&#x5B57;&#x306E;&#x307F;
		// [&#xFF1F;&#xFF01;&#xFF0D;&#x3002;&#x3001;] ... &#x8A18;&#x53F7;
		// prettier-ignore
		return (text.replace(/[&#x3063;]*[&#x3042;&#x3044;&#x3046;&#x3048;&#x304A;&#x304B;-&#x3062;&#x3064;-&#x3082;&#x3084;&#x3086;&#x3088;&#x3089;-&#x308D;&#x308F;&#x3090;&#x3091;&#x3092;&#x3093;&#x30F4;&#x3094;][&#x3041;&#x3043;&#x3045;&#x3047;&#x3049;&#x3083;&#x3085;&#x3087;]?|[&#x3041;&#x3043;&#x3045;&#x3047;&#x3049;&#x3083;&#x3085;&#x3087;&#x308E;&#x3063;]|[&#xFF1F;&#xFF01;&#xFF0D;&#x3002;&#x3001;]/g, func));
	}

	/**
	 * &#x30AB;&#x30BF;&#x30AB;&#x30CA;&#x304B;&#x3089;&#x30ED;&#x30FC;&#x30DE;&#x5B57;&#x306B;&#x5909;&#x63DB;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {string} &#x5909;&#x63DB;&#x5F8C;&#x306E;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 */
	static toRomajiFromKatakana(text) {
		return Japanese.toRomajiFromHiragana(Japanese.toHiragana(text));
	}

	/**
	 * &#x6307;&#x5B9A;&#x3057;&#x305F;&#x30B3;&#x30FC;&#x30C9;&#x30DD;&#x30A4;&#x30F3;&#x30C8;&#x306E;&#x6A2A;&#x5E45;&#x3092;&#x63A8;&#x5B9A;&#x3057;&#x3066;&#x53D6;&#x5F97;&#x3057;&#x307E;&#x3059;
	 * - 0&#x5E45; ... &#x30B0;&#x30E9;&#x30D5;&#x30A7;&#x30E0;&#x3092;&#x69CB;&#x6210;&#x3059;&#x308B;&#x8981;&#x7D20;
	 *           &#xFF08;&#x7D50;&#x5408;&#x6587;&#x5B57;, &#x7570;&#x4F53;&#x5B57;&#x30BB;&#x30EC;&#x30AF;&#x30BF;, &#x30B9;&#x30AD;&#x30F3;&#x30C8;&#x30FC;&#x30F3;&#x4FEE;&#x98FE;&#x5B50;,
	 *            Tag Sequence &#x69CB;&#x6210;&#x6587;&#x5B57;, ZWSP, ZWNJ, ZWJ, WJ&#xFF09;
	 * - 1&#x5E45; ... ASCII&#x6587;&#x5B57;, &#x534A;&#x89D2;&#x30AB;&#x30BF;&#x30AB;&#x30CA;, Regional Indicator&#xFF08;&#x5358;&#x4F53;&#xFF09;
	 * - 2&#x5E45; ... &#x4E0A;&#x8A18;&#x4EE5;&#x5916;
	 * @param {number} cp1 &#x8ABF;&#x67FB;&#x3059;&#x308B;&#x30B3;&#x30FC;&#x30C9;&#x30DD;&#x30A4;&#x30F3;&#x30C8;
	 * @param {number} [cp2] &#x8ABF;&#x67FB;&#x3059;&#x308B;&#x30B3;&#x30FC;&#x30C9;&#x30DD;&#x30A4;&#x30F3;&#x30C8;
	 * @returns {number} &#x6587;&#x5B57;&#x306E;&#x6A2A;&#x5E45;
	 */
	static getWidthFromCodePoint(cp1, cp2) {
		if (cp2 !== undefined) {
			if (Unicode.isRegionalIndicatorContinuation(cp1, cp2)) {
				return 2;
			}
		}
		if (Unicode.isGraphemeComponentFromCodePoint(cp1) || Unicode.isZeroWidthCharacterFromCodePoint(cp1)) {
			return 0;
			// prettier-ignore
		} else if (cp1 &lt; 0x80 || (0xFF61 &lt;= cp1 &amp;&amp; cp1 &lt; 0xFFA0) || Unicode.isRegionalIndicatorFromCodePoint(cp1)) {
			return 1;
		} else {
			return 2;
		}
	}

	/**
	 * &#x6307;&#x5B9A;&#x3057;&#x305F;&#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x306E;&#x6A2A;&#x5E45;&#x3092;&#x534A;&#x89D2;&#xFF0F;&#x5168;&#x89D2;&#x3067;&#x30AB;&#x30A6;&#x30F3;&#x30C8;
	 * - 0&#x5E45; ... &#x30B0;&#x30E9;&#x30D5;&#x30A7;&#x30E0;&#x3092;&#x69CB;&#x6210;&#x3059;&#x308B;&#x8981;&#x7D20;
	 *           &#xFF08;&#x7D50;&#x5408;&#x6587;&#x5B57;, &#x7570;&#x4F53;&#x5B57;&#x30BB;&#x30EC;&#x30AF;&#x30BF;, &#x30B9;&#x30AD;&#x30F3;&#x30C8;&#x30FC;&#x30F3;&#x4FEE;&#x98FE;&#x5B50;,
	 *            Tag Sequence &#x69CB;&#x6210;&#x6587;&#x5B57;, ZWSP, ZWNJ, ZWJ, WJ&#xFF09;
	 * - 1&#x5E45; ... ASCII&#x6587;&#x5B57;, &#x534A;&#x89D2;&#x30AB;&#x30BF;&#x30AB;&#x30CA;, Regional Indicator&#xFF08;&#x5358;&#x4F53;&#xFF09;
	 * - 2&#x5E45; ... &#x4E0A;&#x8A18;&#x4EE5;&#x5916;
	 * @param {string} text - &#x30AB;&#x30A6;&#x30F3;&#x30C8;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {number} &#x6587;&#x5B57;&#x306E;&#x6A2A;&#x5E45;
	 */
	static getWidth(text) {
		const utf32_array = Unicode.toUTF32Array(text);
		let count = 0;
		let isZWJ = false;
		for (let i = 0; i &lt; utf32_array.length; i++) {
			const cp = utf32_array[i];
			// &#x56FD;&#x65D7; (Regional Indicator)
			if (i &lt; utf32_array.length - 1) {
				const next = utf32_array[i + 1];
				if (Unicode.isRegionalIndicatorContinuation(cp, next)) {
					if (!isZWJ) {
						count += Japanese.getWidthFromCodePoint(cp, next);
					}
					i++;
					isZWJ = false;
					continue;
				}
			}
			if (!isZWJ) {
				count += Japanese.getWidthFromCodePoint(cp);
			}
			// prettier-ignore
			isZWJ = cp === 0x200D;
		}
		return count;
	}

	/**
	 * &#x6587;&#x5B57;&#x5E45;&#x3092;&#x8003;&#x616E;&#x3057;&#x3066;&#x6587;&#x5B57;&#x5217;&#x3092;&#x6587;&#x5B57;&#x306E;&#x914D;&#x5217;&#x306B;&#x5909;&#x63DB;&#x3059;&#x308B;
	 * @param {string} text - &#x5909;&#x63DB;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @returns {number[][]} UTF32(&#x30B3;&#x30FC;&#x30C9;&#x30DD;&#x30A4;&#x30F3;&#x30C8;)&#x306E;&#x914D;&#x5217;&#x304C;&#x5165;&#x3063;&#x305F;&#x914D;&#x5217;
	 */
	static toMojiArrayFromString(text) {
		const utf32_array = Unicode.toUTF32Array(text);

		/** @type {number[][]} */
		const moji_array = [];

		/** @type {number[]} */
		let moji = [];

		let isZWJ = false;

		for (let i = 0; i &lt; utf32_array.length; i++) {
			const cp = utf32_array[i];

			// --- &#x56FD;&#x65D7; (Regional Indicator) &#x306F;2&#x3064;&#x3067;1&#x30B0;&#x30E9;&#x30D5;&#x30A7;&#x30E0; ---
			if (i &lt; utf32_array.length - 1) {
				const next = utf32_array[i + 1];
				if (Unicode.isRegionalIndicatorContinuation(cp, next)) {
				// &#x524D;&#x306E;&#x30B0;&#x30E9;&#x30D5;&#x30A7;&#x30E0;&#x3092;&#x78BA;&#x5B9A;
					if (moji.length &gt; 0) {
						moji_array.push(moji);
					}
					// RI&#x30DA;&#x30A2;&#x3067;&#x65B0;&#x3057;&#x3044;&#x30B0;&#x30E9;&#x30D5;&#x30A7;&#x30E0;&#x3092;&#x4F5C;&#x308B;
					moji = [cp, next];

					moji_array.push(moji);
					moji = []; // &#x6B21;&#x306E;&#x30B0;&#x30E9;&#x30D5;&#x30A7;&#x30E0;&#x306B;&#x5099;&#x3048;&#x308B;

					i++;       // 2&#x3064;&#x76EE;&#x306E;RI&#x3092;&#x6D88;&#x8CBB;
					isZWJ = false;
					continue;
				}
			}

			// --- &#x65B0;&#x3057;&#x3044;&#x30B0;&#x30E9;&#x30D5;&#x30A7;&#x30E0;&#x958B;&#x59CB;&#x5224;&#x5B9A; ---
			// &#x300C;ZWJ&#x76F4;&#x5F8C;&#x300D;&#x307E;&#x305F;&#x306F;&#x300C;&#x30B0;&#x30E9;&#x30D5;&#x30A7;&#x30E0;&#x69CB;&#x6210;&#x8981;&#x7D20;&#x300D;&#x306F;&#x524D;&#x306B;&#x7D50;&#x5408;&#x3055;&#x305B;&#x308B;
			const isComponent = Unicode.isGraphemeComponentFromCodePoint(cp);

			if (!isZWJ &amp;&amp; !isComponent) {
			// &#x30D9;&#x30FC;&#x30B9;&#x6587;&#x5B57;&#x304C;&#x6765;&#x305F;&#x306E;&#x3067;&#x3001;&#x524D;&#x306E;&#x30B0;&#x30E9;&#x30D5;&#x30A7;&#x30E0;&#x3092;&#x78BA;&#x5B9A;&#x3057;&#x3066;&#x65B0;&#x3057;&#x304F;&#x958B;&#x59CB;
				if (moji.length &gt; 0) {
					moji_array.push(moji);
				}
				moji = [];
			}

			moji.push(cp);

			// &#x6B21;&#x30EB;&#x30FC;&#x30D7;&#x7528;&#xFF1A;ZWJ &#x306F;&#x6B21;&#x306E;&#x6587;&#x5B57;&#x3068;&#x30B0;&#x30E9;&#x30D5;&#x30A7;&#x30E0;&#x3092;&#x7D50;&#x5408;&#x3059;&#x308B;&#x305F;&#x3081;&#x3001;&#x65B0;&#x3057;&#x3044;&#x5883;&#x754C;&#x3092;&#x4F5C;&#x3089;&#x306A;&#x3044;&#x30D5;&#x30E9;&#x30B0;&#x3092;&#x7ACB;&#x3066;&#x308B;
			isZWJ = (cp === 0x200D);
		}

		// &#x672B;&#x5C3E;&#x304C;&#x6B8B;&#x3063;&#x3066;&#x3044;&#x308C;&#x3070;&#x8FFD;&#x52A0;
		if (moji.length &gt; 0) {
			moji_array.push(moji);
		}

		return moji_array;
	}

	/**
	 * &#x7D50;&#x5408;&#x3057;&#x305F;&#x6587;&#x5B57;&#x3092;&#x8003;&#x616E;&#x3057;&#x3066;&#x6587;&#x5B57;&#x306E;&#x914D;&#x5217;&#x3092;&#x6587;&#x5B57;&#x5217;&#x306B;&#x5909;&#x63DB;&#x3059;&#x308B;
	 * @param {number[][]} mojiarray - UTF32(&#x30B3;&#x30FC;&#x30C9;&#x30DD;&#x30A4;&#x30F3;&#x30C8;)&#x306E;&#x914D;&#x5217;&#x304C;&#x5165;&#x3063;&#x305F;&#x914D;&#x5217;
	 * @returns {string} UTF32(&#x30B3;&#x30FC;&#x30C9;&#x30DD;&#x30A4;&#x30F3;&#x30C8;)&#x306E;&#x914D;&#x5217;&#x304C;&#x5165;&#x3063;&#x305F;&#x914D;&#x5217;
	 */
	static toStringFromMojiArray(mojiarray) {
		/**
		 * @type {number[]}
		 */
		const utf32 = [];
		for (let i = 0; i &lt; mojiarray.length; i++) {
			for (let j = 0; j &lt; mojiarray[i].length; j++) {
				utf32.push(mojiarray[i][j]);
			}
		}
		return Unicode.fromUTF32Array(utf32);
	}

	/**
	 * &#x6307;&#x5B9A;&#x3057;&#x305F;&#x30C6;&#x30AD;&#x30B9;&#x30C8;&#x306E;&#x6A2A;&#x5E45;&#x3092;&#x534A;&#x89D2;&#xFF0F;&#x5168;&#x89D2;&#x3067;&#x63DB;&#x7B97;&#x3057;&#x305F;&#x5834;&#x5408;&#x306E;&#x5207;&#x308A;&#x51FA;&#x3057;
	 * - 0&#x5E45; ... &#x30B0;&#x30E9;&#x30D5;&#x30A7;&#x30E0;&#x3092;&#x69CB;&#x6210;&#x3059;&#x308B;&#x8981;&#x7D20;
	 *           &#xFF08;&#x7D50;&#x5408;&#x6587;&#x5B57;, &#x7570;&#x4F53;&#x5B57;&#x30BB;&#x30EC;&#x30AF;&#x30BF;, &#x30B9;&#x30AD;&#x30F3;&#x30C8;&#x30FC;&#x30F3;&#x4FEE;&#x98FE;&#x5B50;,
	 *            Tag Sequence &#x69CB;&#x6210;&#x6587;&#x5B57;, ZWSP, ZWNJ, ZWJ, WJ&#xFF09;
	 * - 1&#x5E45; ... ASCII&#x6587;&#x5B57;, &#x534A;&#x89D2;&#x30AB;&#x30BF;&#x30AB;&#x30CA;, Regional Indicator&#xFF08;&#x5358;&#x4F53;&#xFF09;
	 * - 2&#x5E45; ... &#x4E0A;&#x8A18;&#x4EE5;&#x5916;
	 * @param {string} text - &#x5207;&#x308A;&#x51FA;&#x3057;&#x305F;&#x3044;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @param {number} offset - &#x5207;&#x308A;&#x51FA;&#x3057;&#x4F4D;&#x7F6E;
	 * @param {number} size - &#x5207;&#x308A;&#x51FA;&#x3059;&#x9577;&#x3055;
	 * @returns {string} &#x5207;&#x308A;&#x51FA;&#x3057;&#x305F;&#x30C6;&#x30AD;&#x30B9;&#x30C8;
	 * @ignore
	 */
	static cutTextForWidth(text, offset, size) {
		const moji_array = Japanese.toMojiArrayFromString(text);
		const SPACE = [0x20]; // &apos; &apos;
		/**
		 * @type {number[][]}
		 */
		const output = [];
		let is_target = false;
		let position = 0;
		let cut_size = size;
		if (offset &lt; 0) {
			cut_size += offset;
			offset = 0;
		}
		if (cut_size &lt;= 0) {
			return &quot;&quot;;
		}
		for (let i = 0; i &lt; moji_array.length; i++) {
			// 1&#x6587;&#x5B57;&#x76EE;&#x306E;&#x6A2A;&#x5E45;&#x3092;&#x53D6;&#x5F97;
			const ch = moji_array[i][0];
			// prettier-ignore
			const ch_size = ch &lt; 0x80 || (0xFF61 &lt;= ch &amp;&amp; ch &lt; 0xFFA0) ? 1 : 2;
			if (position &gt;= offset) {
				is_target = true;
				if (cut_size &gt;= ch_size) {
					output.push(moji_array[i]);
				} else {
					output.push(SPACE);
				}
				cut_size -= ch_size;
				if (cut_size &lt;= 0) {
					break;
				}
			}
			position += ch_size;
			// 2&#x30D0;&#x30A4;&#x30C8;&#x6587;&#x5B57;&#x306E;&#x9014;&#x4E2D;&#x3092;offset&#x6307;&#x5B9A;&#x3057;&#x3066;&#x3044;&#x305F;&#x5834;&#x5408;&#x306B;&#x306A;&#x308B;&#x3002;
			if (position - 1 &gt;= offset &amp;&amp; !is_target) {
				cut_size--;
				output.push(SPACE);
			}
		}
		return Japanese.toStringFromMojiArray(output);
	}
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
